<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SP CDR Reconciliation - Production Real-Time Architecture</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f8f9fa;
        }
        .container {
            max-width: 1600px;
            margin: 0 auto;
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        .header h1 {
            margin: 0;
            font-size: 2.5em;
            font-weight: 300;
        }
        .header p {
            margin: 10px 0 0 0;
            opacity: 0.9;
            font-size: 1.1em;
        }
        .diagram-container {
            padding: 20px;
            text-align: center;
            background: white;
        }
        .diagram-container svg {
            max-width: 100%;
            height: auto;
            border: 1px solid #e9ecef;
            border-radius: 8px;
        }
        .description {
            padding: 30px;
            background: #f8f9fa;
        }
        .description h2 {
            color: #495057;
            border-bottom: 2px solid #dee2e6;
            padding-bottom: 10px;
        }
        .layers {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        .layer-card {
            background: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .layer-card h3 {
            margin: 0 0 15px 0;
            color: #343a40;
        }
        .layer-card ul {
            margin: 0;
            padding-left: 20px;
        }
        .layer-card li {
            margin-bottom: 5px;
            color: #6c757d;
        }
        .scale-comparison {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
            padding: 30px;
            margin-top: 30px;
            border-radius: 8px;
        }
        .scale-comparison h2 {
            margin: 0 0 20px 0;
            border: none;
            color: white;
        }
        .comparison-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }
        .comparison-item {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 6px;
        }
        .comparison-item h4 {
            margin: 0 0 10px 0;
            font-size: 1.1em;
        }
        .perf-metrics {
            background: linear-gradient(135deg, #dc3545 0%, #fd7e14 100%);
            color: white;
            padding: 30px;
            margin-top: 30px;
            border-radius: 8px;
        }
        .perf-metrics h2 {
            margin: 0 0 20px 0;
            border: none;
            color: white;
        }
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }
        .metric {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 6px;
            text-align: center;
        }
        .metric h4 {
            margin: 0 0 10px 0;
            font-size: 2em;
        }
        .metric p {
            margin: 0;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>SP CDR Reconciliation - Production Architecture</h1>
            <p>Real-Time Processing for Billions of CDRs per Day</p>
        </div>

        <div class="diagram-container">
            <svg width="1600" height="1200" xmlns="http://www.w3.org/2000/svg">
              <!-- Background -->
              <rect width="1600" height="1200" fill="#f8f9fa"/>

              <!-- Title -->
              <text x="800" y="30" text-anchor="middle" font-size="24" font-weight="bold" fill="#2c3e50">
                Production Real-Time CDR Reconciliation Architecture
              </text>
              <text x="800" y="55" text-anchor="middle" font-size="16" fill="#666">
                Handling 10+ Billion CDRs/Day per Operator with Sub-Second Settlement
              </text>

              <!-- Layer 1: Telecom Infrastructure (Real-Time CDR Sources) -->
              <rect x="50" y="80" width="1500" height="140" rx="10" fill="#e8f5e8" stroke="#28a745" stroke-width="3"/>
              <text x="80" y="110" font-size="18" font-weight="bold" fill="#28a745">TELECOM INFRASTRUCTURE - CDR SOURCES</text>

              <!-- Cell Tower Networks -->
              <rect x="100" y="130" width="200" height="80" rx="5" fill="#d4edda" stroke="#28a745"/>
              <text x="200" y="150" text-anchor="middle" font-size="12" font-weight="bold">Cell Tower Network</text>
              <text x="200" y="165" text-anchor="middle" font-size="10">5G/4G Base Stations</text>
              <text x="200" y="180" text-anchor="middle" font-size="10">ğŸ“Š 1M CDRs/hour</text>
              <text x="200" y="195" text-anchor="middle" font-size="10">âš¡ Real-time streaming</text>

              <rect x="320" y="130" width="200" height="80" rx="5" fill="#d4edda" stroke="#28a745"/>
              <text x="420" y="150" text-anchor="middle" font-size="12" font-weight="bold">Core Network</text>
              <text x="420" y="165" text-anchor="middle" font-size="10">MSC/SGSN/P-GW</text>
              <text x="420" y="180" text-anchor="middle" font-size="10">ğŸ“Š 5M CDRs/hour</text>
              <text x="420" y="195" text-anchor="middle" font-size="10">âš¡ Kafka streams</text>

              <rect x="540" y="130" width="200" height="80" rx="5" fill="#d4edda" stroke="#28a745"/>
              <text x="640" y="150" text-anchor="middle" font-size="12" font-weight="bold">Roaming Gateway</text>
              <text x="640" y="165" text-anchor="middle" font-size="10">International CDRs</text>
              <text x="640" y="180" text-anchor="middle" font-size="10">ğŸ“Š 500K CDRs/hour</text>
              <text x="640" y="195" text-anchor="middle" font-size="10">ğŸŒ Cross-border</text>

              <rect x="760" y="130" width="200" height="80" rx="5" fill="#d4edda" stroke="#28a745"/>
              <text x="860" y="150" text-anchor="middle" font-size="12" font-weight="bold">VAS/OTT Services</text>
              <text x="860" y="165" text-anchor="middle" font-size="10">Apps, IoT, M2M</text>
              <text x="860" y="180" text-anchor="middle" font-size="10">ğŸ“Š 2M CDRs/hour</text>
              <text x="860" y="195" text-anchor="middle" font-size="10">ğŸ“± Digital services</text>

              <rect x="980" y="130" width="200" height="80" rx="5" fill="#d4edda" stroke="#28a745"/>
              <text x="1080" y="150" text-anchor="middle" font-size="12" font-weight="bold">Wholesale/MVNO</text>
              <text x="1080" y="165" text-anchor="middle" font-size="10">Partner networks</text>
              <text x="1080" y="180" text-anchor="middle" font-size="10">ğŸ“Š 800K CDRs/hour</text>
              <text x="1080" y="195" text-anchor="middle" font-size="10">ğŸ¤ B2B traffic</text>

              <!-- Total throughput -->
              <rect x="1250" y="140" width="250" height="60" rx="5" fill="#c3e6cb" stroke="#28a745" stroke-width="2"/>
              <text x="1375" y="160" text-anchor="middle" font-size="14" font-weight="bold" fill="#155724">TOTAL THROUGHPUT</text>
              <text x="1375" y="180" text-anchor="middle" font-size="16" font-weight="bold" fill="#155724">ğŸ“Š 10+ Billion CDRs/Day</text>
              <text x="1375" y="195" text-anchor="middle" font-size="12" fill="#155724">âš¡ 115K CDRs/second peak</text>

              <!-- Data flow arrows -->
              <line x1="200" y1="210" x2="200" y2="250" stroke="#28a745" stroke-width="3" marker-end="url(#arrowhead)"/>
              <line x1="420" y1="210" x2="420" y2="250" stroke="#28a745" stroke-width="3" marker-end="url(#arrowhead)"/>
              <line x1="640" y1="210" x2="640" y2="250" stroke="#28a745" stroke-width="3" marker-end="url(#arrowhead)"/>
              <line x1="860" y1="210" x2="860" y2="250" stroke="#28a745" stroke-width="3" marker-end="url(#arrowhead)"/>
              <line x1="1080" y1="210" x2="1080" y2="250" stroke="#28a745" stroke-width="3" marker-end="url(#arrowhead)"/>

              <!-- Layer 2: Real-Time Ingestion & Stream Processing -->
              <rect x="50" y="250" width="1500" height="120" rx="10" fill="#fff3cd" stroke="#ffc107" stroke-width="3"/>
              <text x="80" y="280" font-size="18" font-weight="bold" fill="#856404">REAL-TIME INGESTION & STREAM PROCESSING</text>

              <rect x="100" y="300" width="280" height="60" rx="5" fill="#fff3cd" stroke="#ffc107"/>
              <text x="240" y="320" text-anchor="middle" font-size="12" font-weight="bold">Apache Kafka Cluster</text>
              <text x="240" y="335" text-anchor="middle" font-size="10">ğŸ“Š 1000+ partitions</text>
              <text x="240" y="350" text-anchor="middle" font-size="10">âš¡ 10M messages/sec</text>

              <rect x="400" y="300" width="280" height="60" rx="5" fill="#fff3cd" stroke="#ffc107"/>
              <text x="540" y="320" text-anchor="middle" font-size="12" font-weight="bold">Apache Flink/Spark</text>
              <text x="540" y="335" text-anchor="middle" font-size="10">ğŸ”„ Real-time aggregation</text>
              <text x="540" y="350" text-anchor="middle" font-size="10">âš¡ Sub-second processing</text>

              <rect x="700" y="300" width="280" height="60" rx="5" fill="#fff3cd" stroke="#ffc107"/>
              <text x="840" y="320" text-anchor="middle" font-size="12" font-weight="bold">Redis Cache Layer</text>
              <text x="840" y="335" text-anchor="middle" font-size="10">ğŸš€ In-memory aggregation</text>
              <text x="840" y="350" text-anchor="middle" font-size="10">âš¡ Microsecond lookup</text>

              <rect x="1000" y="300" width="280" height="60" rx="5" fill="#fff3cd" stroke="#ffc107"/>
              <text x="1140" y="320" text-anchor="middle" font-size="12" font-weight="bold">Data Lake Storage</text>
              <text x="1140" y="335" text-anchor="middle" font-size="10">ğŸ“ HDFS/S3 raw CDRs</text>
              <text x="1140" y="350" text-anchor="middle" font-size="10">ğŸ’¾ Petabyte scale</text>

              <!-- Arrows to next layer -->
              <line x1="800" y1="370" x2="800" y2="410" stroke="#ffc107" stroke-width="3" marker-end="url(#arrowhead)"/>

              <!-- Layer 3: CDR Aggregation & Batching Engine -->
              <rect x="50" y="410" width="1500" height="120" rx="10" fill="#d1ecf1" stroke="#17a2b8" stroke-width="3"/>
              <text x="80" y="440" font-size="18" font-weight="bold" fill="#0c5460">CDR AGGREGATION & BATCHING ENGINE</text>

              <rect x="100" y="460" width="200" height="60" rx="5" fill="#bee5eb" stroke="#17a2b8"/>
              <text x="200" y="480" text-anchor="middle" font-size="11" font-weight="bold">Temporal Aggregation</text>
              <text x="200" y="495" text-anchor="middle" font-size="9">â° Hourly batches</text>
              <text x="200" y="510" text-anchor="middle" font-size="9">ğŸ“Š 100M â†’ 1K records</text>

              <rect x="320" y="460" width="200" height="60" rx="5" fill="#bee5eb" stroke="#17a2b8"/>
              <text x="420" y="480" text-anchor="middle" font-size="11" font-weight="bold">Network Pair Grouping</text>
              <text x="420" y="495" text-anchor="middle" font-size="9">ğŸŒ Home â†” Visited</text>
              <text x="420" y="510" text-anchor="middle" font-size="9">ğŸ”— Bilateral netting</text>

              <rect x="540" y="460" width="200" height="60" rx="5" fill="#bee5eb" stroke="#17a2b8"/>
              <text x="640" y="480" text-anchor="middle" font-size="11" font-weight="bold">Triangular Detection</text>
              <text x="640" y="495" text-anchor="middle" font-size="9">ğŸ”º Aâ†’Bâ†’Câ†’A cycles</text>
              <text x="640" y="510" text-anchor="middle" font-size="9">ğŸ’° Netting opportunities</text>

              <rect x="760" y="460" width="200" height="60" rx="5" fill="#bee5eb" stroke="#17a2b8"/>
              <text x="860" y="480" text-anchor="middle" font-size="11" font-weight="bold">Fraud Detection</text>
              <text x="860" y="495" text-anchor="middle" font-size="9">ğŸš¨ Anomaly detection</text>
              <text x="860" y="510" text-anchor="middle" font-size="9">âš¡ Real-time alerts</text>

              <rect x="980" y="460" width="200" height="60" rx="5" fill="#bee5eb" stroke="#17a2b8"/>
              <text x="1080" y="480" text-anchor="middle" font-size="11" font-weight="bold">Dispute Management</text>
              <text x="1080" y="495" text-anchor="middle" font-size="9">âš–ï¸  CDR reconciliation</text>
              <text x="1080" y="510" text-anchor="middle" font-size="9">ğŸ“ Audit trails</text>

              <rect x="1200" y="460" width="200" height="60" rx="5" fill="#bee5eb" stroke="#17a2b8"/>
              <text x="1300" y="480" text-anchor="middle" font-size="11" font-weight="bold">Rate Engine</text>
              <text x="1300" y="495" text-anchor="middle" font-size="9">ğŸ’¶ Dynamic pricing</text>
              <text x="1300" y="510" text-anchor="middle" font-size="9">ğŸ“ˆ Real-time rates</text>

              <!-- Arrows to ZK layer -->
              <line x1="800" y1="530" x2="800" y2="570" stroke="#17a2b8" stroke-width="3" marker-end="url(#arrowhead)"/>

              <!-- Layer 4: Distributed ZK Proof Generation -->
              <rect x="50" y="570" width="1500" height="120" rx="10" fill="#f8d7da" stroke="#dc3545" stroke-width="3"/>
              <text x="80" y="600" font-size="18" font-weight="bold" fill="#721c24">DISTRIBUTED ZK PROOF GENERATION LAYER</text>

              <rect x="100" y="620" width="180" height="60" rx="5" fill="#f5c6cb" stroke="#dc3545"/>
              <text x="190" y="640" text-anchor="middle" font-size="10" font-weight="bold">GPU Cluster</text>
              <text x="190" y="655" text-anchor="middle" font-size="8">ğŸ–¥ï¸ NVIDIA A100</text>
              <text x="190" y="670" text-anchor="middle" font-size="8">âš¡ 1000+ proofs/sec</text>

              <rect x="300" y="620" width="180" height="60" rx="5" fill="#f5c6cb" stroke="#dc3545"/>
              <text x="390" y="640" text-anchor="middle" font-size="10" font-weight="bold">Proof Coordinator</text>
              <text x="390" y="655" text-anchor="middle" font-size="8">ğŸ”— Batch coordination</text>
              <text x="390" y="670" text-anchor="middle" font-size="8">âš–ï¸ Load balancing</text>

              <rect x="500" y="620" width="180" height="60" rx="5" fill="#f5c6cb" stroke="#dc3545"/>
              <text x="590" y="640" text-anchor="middle" font-size="10" font-weight="bold">Merkle Tree Builder</text>
              <text x="590" y="655" text-anchor="middle" font-size="8">ğŸŒ³ CDR commitments</text>
              <text x="590" y="670" text-anchor="middle" font-size="8">ğŸ” Privacy preservation</text>

              <rect x="700" y="620" width="180" height="60" rx="5" fill="#f5c6cb" stroke="#dc3545"/>
              <text x="790" y="640" text-anchor="middle" font-size="10" font-weight="bold">Circuit Compiler</text>
              <text x="790" y="655" text-anchor="middle" font-size="8">âš™ï¸ Dynamic circuits</text>
              <text x="790" y="670" text-anchor="middle" font-size="8">ğŸ”„ Optimization</text>

              <rect x="900" y="620" width="180" height="60" rx="5" fill="#f5c6cb" stroke="#dc3545"/>
              <text x="990" y="640" text-anchor="middle" font-size="10" font-weight="bold">Proof Verification</text>
              <text x="990" y="655" text-anchor="middle" font-size="8">âœ… Batch validation</text>
              <text x="990" y="670" text-anchor="middle" font-size="8">âš¡ Parallel verify</text>

              <rect x="1100" y="620" width="180" height="60" rx="5" fill="#f5c6cb" stroke="#dc3545"/>
              <text x="1190" y="640" text-anchor="middle" font-size="10" font-weight="bold">Key Management</text>
              <text x="1190" y="655" text-anchor="middle" font-size="8">ğŸ—ï¸ HSM integration</text>
              <text x="1190" y="670" text-anchor="middle" font-size="8">ğŸ”’ Secure storage</text>

              <rect x="1300" y="620" width="180" height="60" rx="5" fill="#f5c6cb" stroke="#dc3545"/>
              <text x="1390" y="640" text-anchor="middle" font-size="10" font-weight="bold">Trusted Setup</text>
              <text x="1390" y="655" text-anchor="middle" font-size="8">ğŸ¤ Multi-party MPC</text>
              <text x="1390" y="670" text-anchor="middle" font-size="8">ğŸ” Ceremony</text>

              <!-- Arrows to P2P layer -->
              <line x1="800" y1="690" x2="800" y2="730" stroke="#dc3545" stroke-width="3" marker-end="url(#arrowhead)"/>

              <!-- Layer 5: Inter-Operator P2P Settlement Network -->
              <rect x="50" y="730" width="1500" height="120" rx="10" fill="#e2e3ff" stroke="#6610f2" stroke-width="3"/>
              <text x="80" y="760" font-size="18" font-weight="bold" fill="#3d0b80">INTER-OPERATOR P2P SETTLEMENT NETWORK</text>

              <rect x="100" y="780" width="220" height="60" rx="5" fill="#c8cbff" stroke="#6610f2"/>
              <text x="210" y="800" text-anchor="middle" font-size="11" font-weight="bold">Settlement Gateway</text>
              <text x="210" y="815" text-anchor="middle" font-size="9">ğŸŒ‰ Cross-operator bridge</text>
              <text x="210" y="830" text-anchor="middle" font-size="9">ğŸ”— Protocol translation</text>

              <rect x="340" y="780" width="220" height="60" rx="5" fill="#c8cbff" stroke="#6610f2"/>
              <text x="450" y="800" text-anchor="middle" font-size="11" font-weight="bold">Consensus Engine</text>
              <text x="450" y="815" text-anchor="middle" font-size="9">âš–ï¸ Byzantine fault tolerance</text>
              <text x="450" y="830" text-anchor="middle" font-size="9">ğŸ”— 3-party consensus</text>

              <rect x="580" y="780" width="220" height="60" rx="5" fill="#c8cbff" stroke="#6610f2"/>
              <text x="690" y="800" text-anchor="middle" font-size="11" font-weight="bold">Smart Contract VM</text>
              <text x="690" y="815" text-anchor="middle" font-size="9">ğŸ“œ Settlement contracts</text>
              <text x="690" y="830" text-anchor="middle" font-size="9">âš¡ Gas metering</text>

              <rect x="820" y="780" width="220" height="60" rx="5" fill="#c8cbff" stroke="#6610f2"/>
              <text x="930" y="800" text-anchor="middle" font-size="11" font-weight="bold">Triangular Netting</text>
              <text x="930" y="815" text-anchor="middle" font-size="9">ğŸ”º Multi-party optimization</text>
              <text x="930" y="830" text-anchor="middle" font-size="9">ğŸ’° 80%+ cost reduction</text>

              <rect x="1060" y="780" width="220" height="60" rx="5" fill="#c8cbff" stroke="#6610f2"/>
              <text x="1170" y="800" text-anchor="middle" font-size="11" font-weight="bold">Dispute Resolution</text>
              <text x="1170" y="815" text-anchor="middle" font-size="9">âš–ï¸ Automated arbitration</text>
              <text x="1170" y="830" text-anchor="middle" font-size="9">ğŸ“Š Evidence validation</text>

              <rect x="1300" y="780" width="220" height="60" rx="5" fill="#c8cbff" stroke="#6610f2"/>
              <text x="1410" y="800" text-anchor="middle" font-size="11" font-weight="bold">Regulatory Compliance</text>
              <text x="1410" y="815" text-anchor="middle" font-size="9">ğŸ“‹ GDPR/AML compliance</text>
              <text x="1410" y="830" text-anchor="middle" font-size="9">ğŸ“ Audit reports</text>

              <!-- Arrows to blockchain -->
              <line x1="800" y1="850" x2="800" y2="890" stroke="#6610f2" stroke-width="3" marker-end="url(#arrowhead)"/>

              <!-- Layer 6: High-Performance Blockchain Consensus -->
              <rect x="50" y="890" width="1500" height="120" rx="10" fill="#d4edda" stroke="#28a745" stroke-width="3"/>
              <text x="80" y="920" font-size="18" font-weight="bold" fill="#155724">HIGH-PERFORMANCE BLOCKCHAIN CONSENSUS</text>

              <rect x="100" y="940" width="200" height="60" rx="5" fill="#c3e6cb" stroke="#28a745"/>
              <text x="200" y="960" text-anchor="middle" font-size="11" font-weight="bold">Albatross Consensus</text>
              <text x="200" y="975" text-anchor="middle" font-size="9">âš¡ 1000+ TPS</text>
              <text x="200" y="990" text-anchor="middle" font-size="9">ğŸ”— Instant finality</text>

              <rect x="320" y="940" width="200" height="60" rx="5" fill="#c3e6cb" stroke="#28a745"/>
              <text x="420" y="960" text-anchor="middle" font-size="11" font-weight="bold">Validator Network</text>
              <text x="420" y="975" text-anchor="middle" font-size="9">ğŸ¢ SP consortium</text>
              <text x="420" y="990" text-anchor="middle" font-size="9">ğŸŒ Global distribution</text>

              <rect x="540" y="940" width="200" height="60" rx="5" fill="#c3e6cb" stroke="#28a745"/>
              <text x="640" y="960" text-anchor="middle" font-size="11" font-weight="bold">Block Production</text>
              <text x="640" y="975" text-anchor="middle" font-size="9">ğŸ“¦ Micro/macro blocks</text>
              <text x="640" y="990" text-anchor="middle" font-size="9">â±ï¸ 1-second blocks</text>

              <rect x="760" y="940" width="200" height="60" rx="5" fill="#c3e6cb" stroke="#28a745"/>
              <text x="860" y="960" text-anchor="middle" font-size="11" font-weight="bold">State Management</text>
              <text x="860" y="975" text-anchor="middle" font-size="9">ğŸ’¾ Incremental sync</text>
              <text x="860" y="990" text-anchor="middle" font-size="9">ğŸ—ƒï¸ Efficient storage</text>

              <rect x="980" y="940" width="200" height="60" rx="5" fill="#c3e6cb" stroke="#28a745"/>
              <text x="1080" y="960" text-anchor="middle" font-size="11" font-weight="bold">Cross-Chain Bridge</text>
              <text x="1080" y="975" text-anchor="middle" font-size="9">ğŸŒ‰ External networks</text>
              <text x="1080" y="990" text-anchor="middle" font-size="9">ğŸ”— Interoperability</text>

              <rect x="1200" y="940" width="200" height="60" rx="5" fill="#c3e6cb" stroke="#28a745"/>
              <text x="1300" y="960" text-anchor="middle" font-size="11" font-weight="bold">Finality Engine</text>
              <text x="1300" y="975" text-anchor="middle" font-size="9">âœ… Probabilistic â†’ Absolute</text>
              <text x="1300" y="990" text-anchor="middle" font-size="9">â±ï¸ 3-second finality</text>

              <!-- Arrows to storage -->
              <line x1="800" y1="1010" x2="800" y2="1050" stroke="#28a745" stroke-width="3" marker-end="url(#arrowhead)"/>

              <!-- Layer 7: Distributed Storage & Data Management -->
              <rect x="50" y="1050" width="1500" height="120" rx="10" fill="#fff3cd" stroke="#ffc107" stroke-width="3"/>
              <text x="80" y="1080" font-size="18" font-weight="bold" fill="#856404">DISTRIBUTED STORAGE & DATA MANAGEMENT</text>

              <rect x="100" y="1100" width="180" height="60" rx="5" fill="#fff3cd" stroke="#ffc107"/>
              <text x="190" y="1120" text-anchor="middle" font-size="10" font-weight="bold">MDBX Sharding</text>
              <text x="190" y="1135" text-anchor="middle" font-size="8">ğŸ—‚ï¸ Horizontal scaling</text>
              <text x="190" y="1150" text-anchor="middle" font-size="8">ğŸ’¾ 100TB+ per shard</text>

              <rect x="300" y="1100" width="180" height="60" rx="5" fill="#fff3cd" stroke="#ffc107"/>
              <text x="390" y="1120" text-anchor="middle" font-size="10" font-weight="bold">Hot/Warm/Cold</text>
              <text x="390" y="1135" text-anchor="middle" font-size="8">ğŸŒ¡ï¸ Tiered storage</text>
              <text x="390" y="1150" text-anchor="middle" font-size="8">ğŸ’° Cost optimization</text>

              <rect x="500" y="1100" width="180" height="60" rx="5" fill="#fff3cd" stroke="#ffc107"/>
              <text x="590" y="1120" text-anchor="middle" font-size="10" font-weight="bold">Backup & DR</text>
              <text x="590" y="1135" text-anchor="middle" font-size="8">ğŸ”„ Real-time replication</text>
              <text x="590" y="1150" text-anchor="middle" font-size="8">ğŸŒ Multi-region</text>

              <rect x="700" y="1100" width="180" height="60" rx="5" fill="#fff3cd" stroke="#ffc107"/>
              <text x="790" y="1120" text-anchor="middle" font-size="10" font-weight="bold">Archive Engine</text>
              <text x="790" y="1135" text-anchor="middle" font-size="8">ğŸ“¦ Data compression</text>
              <text x="790" y="1150" text-anchor="middle" font-size="8">âš–ï¸ Legal retention</text>

              <rect x="900" y="1100" width="180" height="60" rx="5" fill="#fff3cd" stroke="#ffc107"/>
              <text x="990" y="1120" text-anchor="middle" font-size="10" font-weight="bold">Query Engine</text>
              <text x="990" y="1135" text-anchor="middle" font-size="8">ğŸ” Real-time analytics</text>
              <text x="990" y="1150" text-anchor="middle" font-size="8">ğŸ“Š Business intelligence</text>

              <rect x="1100" y="1100" width="180" height="60" rx="5" fill="#fff3cd" stroke="#ffc107"/>
              <text x="1190" y="1120" text-anchor="middle" font-size="10" font-weight="bold">Data Governance</text>
              <text x="1190" y="1135" text-anchor="middle" font-size="8">ğŸ›¡ï¸ Privacy controls</text>
              <text x="1190" y="1150" text-anchor="middle" font-size="8">ğŸ“‹ Compliance</text>

              <rect x="1300" y="1100" width="180" height="60" rx="5" fill="#fff3cd" stroke="#ffc107"/>
              <text x="1390" y="1120" text-anchor="middle" font-size="10" font-weight="bold">Monitoring</text>
              <text x="1390" y="1135" text-anchor="middle" font-size="8">ğŸ“ˆ Performance metrics</text>
              <text x="1390" y="1150" text-anchor="middle" font-size="8">ğŸš¨ Alerting</text>

              <!-- Side panel: Production Metrics -->
              <rect x="1550" y="100" width="180" height="400" rx="10" fill="#f8f9fa" stroke="#6c757d" stroke-width="2"/>
              <text x="1640" y="130" text-anchor="middle" font-size="14" font-weight="bold" fill="#495057">PRODUCTION METRICS</text>

              <text x="1560" y="160" font-size="11" font-weight="bold" fill="#dc3545">Throughput</text>
              <text x="1560" y="175" font-size="9" fill="#6c757d">â€¢ 10B+ CDRs/day/operator</text>
              <text x="1560" y="190" font-size="9" fill="#6c757d">â€¢ 115K CDRs/sec peak</text>
              <text x="1560" y="205" font-size="9" fill="#6c757d">â€¢ 1000+ settlements/sec</text>

              <text x="1560" y="230" font-size="11" font-weight="bold" fill="#28a745">Latency</text>
              <text x="1560" y="245" font-size="9" fill="#6c757d">â€¢ CDRâ†’Settlement: <1min</text>
              <text x="1560" y="260" font-size="9" fill="#6c757d">â€¢ ZK Proof gen: <30sec</text>
              <text x="1560" y="275" font-size="9" fill="#6c757d">â€¢ Block finality: <3sec</text>

              <text x="1560" y="300" font-size="11" font-weight="bold" fill="#17a2b8">Storage</text>
              <text x="1560" y="315" font-size="9" fill="#6c757d">â€¢ Raw CDRs: 100PB+</text>
              <text x="1560" y="330" font-size="9" fill="#6c757d">â€¢ Blockchain: 10TB</text>
              <text x="1560" y="345" font-size="9" fill="#6c757d">â€¢ Compression: 99.9%</text>

              <text x="1560" y="370" font-size="11" font-weight="bold" fill="#ffc107">Cost Savings</text>
              <text x="1560" y="385" font-size="9" fill="#6c757d">â€¢ Triangular netting: 80%</text>
              <text x="1560" y="400" font-size="9" fill="#6c757d">â€¢ Processing: 95%</text>
              <text x="1560" y="415" font-size="9" fill="#6c757d">â€¢ Settlement time: 90%</text>

              <text x="1560" y="440" font-size="11" font-weight="bold" fill="#6f42c1">Reliability</text>
              <text x="1560" y="455" font-size="9" fill="#6c757d">â€¢ Uptime: 99.99%</text>
              <text x="1560" y="470" font-size="9" fill="#6c757d">â€¢ Fault tolerance: 33%</text>
              <text x="1560" y="485" font-size="9" fill="#6c757d">â€¢ Recovery: <5min</text>

              <!-- Arrow marker definition -->
              <defs>
                <marker id="arrowhead" markerWidth="10" markerHeight="7"
                 refX="9" refY="3.5" orient="auto">
                  <polygon points="0 0, 10 3.5, 0 7" fill="#2c3e50"/>
                </marker>
              </defs>
            </svg>
        </div>

        <div class="description">
            <h2>Production Architecture Overview</h2>
            <p>The Production Real-Time CDR Reconciliation Architecture is designed to handle enterprise-scale telecom operations with billions of CDRs processed daily. This architecture transforms your current demo into a industrial-strength system capable of real-world deployment across major telecom operators.</p>

            <div class="layers">
                <div class="layer-card">
                    <h3>ğŸ“¡ Telecom Infrastructure</h3>
                    <ul>
                        <li><strong>Real-time CDR sources:</strong> Cell towers, core network, roaming gateways</li>
                        <li><strong>Scale:</strong> 10+ billion CDRs/day per operator</li>
                        <li><strong>Peak throughput:</strong> 115K CDRs/second</li>
                        <li><strong>Coverage:</strong> 5G/4G, IoT, VAS, wholesale traffic</li>
                    </ul>
                </div>

                <div class="layer-card">
                    <h3>ğŸŒŠ Real-Time Ingestion</h3>
                    <ul>
                        <li><strong>Apache Kafka:</strong> 1000+ partition cluster, 10M messages/sec</li>
                        <li><strong>Stream Processing:</strong> Apache Flink/Spark for real-time aggregation</li>
                        <li><strong>Caching:</strong> Redis for microsecond-latency lookups</li>
                        <li><strong>Data Lake:</strong> HDFS/S3 petabyte-scale raw storage</li>
                    </ul>
                </div>

                <div class="layer-card">
                    <h3>ğŸ“Š Aggregation Engine</h3>
                    <ul>
                        <li><strong>Compression:</strong> 100M CDRs â†’ 1K settlement records</li>
                        <li><strong>Temporal batching:</strong> Hourly aggregation cycles</li>
                        <li><strong>Triangular netting:</strong> Multi-operator optimization</li>
                        <li><strong>Real-time fraud detection:</strong> ML-powered anomaly detection</li>
                    </ul>
                </div>

                <div class="layer-card">
                    <h3>ğŸ” Distributed ZK Proofs</h3>
                    <ul>
                        <li><strong>GPU clusters:</strong> NVIDIA A100 for 1000+ proofs/sec</li>
                        <li><strong>Merkle trees:</strong> Privacy-preserving CDR commitments</li>
                        <li><strong>Dynamic circuits:</strong> Optimized proof generation</li>
                        <li><strong>HSM integration:</strong> Hardware security modules</li>
                    </ul>
                </div>

                <div class="layer-card">
                    <h3>ğŸŒ P2P Settlement Network</h3>
                    <ul>
                        <li><strong>Cross-operator gateways:</strong> Protocol translation</li>
                        <li><strong>Byzantine consensus:</strong> 3-party settlement validation</li>
                        <li><strong>Smart contracts:</strong> Automated settlement execution</li>
                        <li><strong>Dispute resolution:</strong> Automated arbitration system</li>
                    </ul>
                </div>

                <div class="layer-card">
                    <h3>âš¡ High-Performance Blockchain</h3>
                    <ul>
                        <li><strong>Albatross consensus:</strong> 1000+ TPS, 3-second finality</li>
                        <li><strong>Global validators:</strong> SP consortium distributed nodes</li>
                        <li><strong>Micro/macro blocks:</strong> 1-second block production</li>
                        <li><strong>Cross-chain bridges:</strong> External network integration</li>
                    </ul>
                </div>

                <div class="layer-card">
                    <h3>ğŸ’¾ Distributed Storage</h3>
                    <ul>
                        <li><strong>MDBX sharding:</strong> 100TB+ per shard horizontal scaling</li>
                        <li><strong>Tiered storage:</strong> Hot/warm/cold data management</li>
                        <li><strong>Multi-region DR:</strong> Real-time replication</li>
                        <li><strong>Compliance:</strong> GDPR/AML automated governance</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="scale-comparison">
            <h2>Demo vs Production Scale Comparison</h2>
            <div class="comparison-grid">
                <div class="comparison-item">
                    <h4>ğŸ“Š Data Volume</h4>
                    <p><strong>Demo:</strong> 6 CDRs/day<br>
                       <strong>Production:</strong> 10+ billion CDRs/day</p>
                </div>
                <div class="comparison-item">
                    <h4>âš¡ Processing Speed</h4>
                    <p><strong>Demo:</strong> 30-second batches<br>
                       <strong>Production:</strong> Real-time streaming</p>
                </div>
                <div class="comparison-item">
                    <h4>ğŸ’° Settlement Threshold</h4>
                    <p><strong>Demo:</strong> â‚¬1 threshold<br>
                       <strong>Production:</strong> â‚¬100K+ thresholds</p>
                </div>
                <div class="comparison-item">
                    <h4>ğŸ’¾ Storage</h4>
                    <p><strong>Demo:</strong> MDBX single node<br>
                       <strong>Production:</strong> Distributed 100TB+ shards</p>
                </div>
                <div class="comparison-item">
                    <h4>ğŸ” ZK Proofs</h4>
                    <p><strong>Demo:</strong> CPU single thread<br>
                       <strong>Production:</strong> GPU cluster 1000+ proofs/sec</p>
                </div>
                <div class="comparison-item">
                    <h4>ğŸŒ Network</h4>
                    <p><strong>Demo:</strong> 3 Docker containers<br>
                       <strong>Production:</strong> Global multi-region deployment</p>
                </div>
            </div>
        </div>

        <div class="perf-metrics">
            <h2>Production Performance Targets</h2>
            <div class="metrics-grid">
                <div class="metric">
                    <h4>10B+</h4>
                    <p>CDRs processed daily per operator</p>
                </div>
                <div class="metric">
                    <h4>115K</h4>
                    <p>Peak CDRs per second throughput</p>
                </div>
                <div class="metric">
                    <h4>&lt;1 min</h4>
                    <p>CDR to settlement latency</p>
                </div>
                <div class="metric">
                    <h4>1000+</h4>
                    <p>Blockchain transactions per second</p>
                </div>
                <div class="metric">
                    <h4>99.9%</h4>
                    <p>Data compression ratio</p>
                </div>
                <div class="metric">
                    <h4>80%</h4>
                    <p>Cost reduction via triangular netting</p>
                </div>
                <div class="metric">
                    <h4>99.99%</h4>
                    <p>System uptime SLA</p>
                </div>
                <div class="metric">
                    <h4>&lt;3 sec</h4>
                    <p>Blockchain finality time</p>
                </div>
            </div>
        </div>
    </div>
</body>
</html>